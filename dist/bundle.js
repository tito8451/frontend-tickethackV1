(()=>{document.querySelector("#date").valueAsDate=new Date;const t="https://backend-tickethack-seven.vercel.app";document.querySelector("#search").addEventListener("click",(function(){const e=document.querySelector("#departure").value.trim(),n=document.querySelector("#arrival").value.trim(),r=document.querySelector("#date").value.trim();e&&n&&r?fetch(`${t}/search/${e}/${n}/${r}`).then((t=>t.json())).then((e=>{if(e.result){document.querySelector("#results").innerHTML="";for(const t of e.trips)document.querySelector("#results").innerHTML+=`\n\t\t\t\t\t  <div class="trip">\n\t\t\t\t\t\t  <span>${t.departure} > ${t.arrival}</span> \n\t\t\t\t\t\t\t<span>${moment(t.date).format("HH:mm")}</span>  \n\t\t\t\t\t\t\t<span class="price">${t.price}â‚¬</span>\n\t\t\t\t\t\t\t<button class="book" id="${t._id}">Book</button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`,document.querySelector("#results").style.justifyContent="flex-start";!function(){for(let e=0;e<document.querySelectorAll(".book").length;e++)document.querySelectorAll(".book")[e].addEventListener("click",(function(){fetch(`${t}/cart`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tripId:this.id})}).then((t=>t.json())).then((t=>{t.result&&window.location.assign("cart.html")}))}))}()}else document.querySelector("#results").innerHTML='\n\t\t\t\t\t<img id="results-logo" src="images/notfound.png"/>\n\t\t\t\t\t<div class="divider green"></div>\n\t\t\t\t\t<span>No trip found.</span>\n\t\t\t\t'})):alert("Please fill in all fields.")}))})();